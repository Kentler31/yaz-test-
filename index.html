<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Neon Typer | Eyy√ºp ƒ∞f≈üat Global</title>
    <style>
        :root { --bg: #ffffff; --card: #fdfdfd; --main: #8a2be2; --text: #1a1a1a; --sub: #888; --border: #ececec; --err: #ff4754; --succ: #2ecc71; }
        body.dark-theme { --bg: #0d0d12; --card: #16161e; --main: #a155ff; --text: #eee; --sub: #555; --border: #222; --err: #ff6b81; --succ: #1dd1a1; }
        body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; margin: 0; overflow: hidden; transition: 0.3s; }

        /* AUTH & SCREENS */
        #auth-screen { position: fixed; inset: 0; background: #fff; display: flex; justify-content: center; align-items: center; z-index: 10000; }
        .auth-box { text-align: center; width: 400px; }
        .input-group { background: #fff; padding: 35px; border-radius: 28px; box-shadow: 0 15px 50px rgba(0,0,0,0.05); border: 1px solid #f0f0f0; }
        .auth-box input { width: 100%; padding: 16px; margin: 8px 0; border: 1px solid #eee; border-radius: 14px; outline: none; background: #fcfcfc; box-sizing: border-box; }
        .btn-main { width: 100%; padding: 16px; background: #1a1a1a; color: #fff; border: none; border-radius: 14px; cursor: pointer; font-weight: 600; font-size: 16px; }

        /* RESULT & ANALYSIS */
        #result-overlay { position: fixed; inset: 0; background: rgba(255,255,255,0.9); z-index: 8000; display: none; justify-content: center; align-items: center; backdrop-filter: blur(10px); }
        body.dark-theme #result-overlay { background: rgba(13,13,18,0.95); }
        .result-card { background: var(--card); padding: 40px; border-radius: 30px; border: 1px solid var(--border); text-align: center; width: 400px; }

        /* SIDEBAR & PROFILE */
        .nav-icon { position: fixed; top: 30px; left: 30px; font-size: 24px; cursor: pointer; z-index: 1001; color: var(--sub); }
        .side-panel { position: fixed; top: 0; left: -380px; width: 380px; height: 100%; background: var(--card); border-right: 1px solid var(--border); transition: 0.4s; z-index: 1000; padding: 40px 25px; box-sizing: border-box; }
        .side-panel.open { left: 0; }
        .profile-card { border-bottom: 1px solid var(--border); padding-bottom: 20px; margin-bottom: 20px; }
        .pb-badge { background: var(--main); color: white; padding: 5px 12px; border-radius: 20px; font-size: 12px; font-weight: bold; margin-top: 10px; display: inline-block; }

        /* LANGUAGE SELECTOR (SAƒû √úST) */
        .lang-container { position: absolute; top: 0; right: 0; margin-bottom: 10px; }
        .lang-select { background: var(--card); border: 1px solid var(--border); color: var(--text); padding: 8px 15px; border-radius: 10px; cursor: pointer; font-weight: bold; font-size: 14px; }

        /* GAME AREA */
        .container { height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 0 15%; position: relative; }
        #word-display { width: 100%; font-size: 38px; line-height: 1.6; height: 125px; overflow: hidden; display: flex; flex-wrap: wrap; text-align: left; }
        .word { margin-right: 22px; color: var(--sub); border-bottom: 3px solid transparent; }
        .word.active { color: var(--text); border-color: var(--main); }
        .word.correct { color: var(--succ); }
        .word.wrong { color: var(--err); text-decoration: line-through; }
        #typing-input { opacity: 0; position: absolute; }
        
        .stat-top { font-size: 24px; font-weight: 900; color: var(--main); margin-bottom: 20px; }
    </style>
</head>
<body onclick="focusInput()">

<div id="auth-screen">
    <div class="auth-box">
        <h1>Neon Typer</h1>
        <div class="input-group">
            <input type="text" id="u-name" placeholder="Kullanƒ±cƒ± Adƒ±">
            <input type="email" id="u-email" placeholder="E-posta">
            <button class="btn-main" onclick="login()">Oturuma Ba≈üla</button>
        </div>
    </div>
</div>

<div id="result-overlay">
    <div class="result-card">
        <h2 style="color:var(--main)">Oyun Bitti</h2>
        <h1 id="res-score" style="font-size:48px; margin:10px 0;">0</h1>
        <p id="res-stats" style="color:var(--sub)"></p>
        <button class="btn-main" onclick="location.reload()">Tekrar Dene</button>
    </div>
</div>

<div class="nav-icon" onclick="toggleSide()">‚ò∞</div>

<div id="side-menu" class="side-panel">
    <div class="profile-card">
        <div style="display:flex; align-items:center; gap:15px;">
            <div id="av-icon" style="width:50px; height:50px; background:var(--main); border-radius:50%; display:flex; align-items:center; justify-content:center; color:white; font-weight:bold; font-size:20px;">?</div>
            <div>
                <h2 id="av-name" style="margin:0; font-size:18px;">Eyy√ºp ƒ∞f≈üat</h2>
                <div class="pb-badge">Rekor: <span id="pb-val">0</span></div>
            </div>
        </div>
    </div>
    <div style="padding:10px; cursor:pointer;" onclick="setTheme('dark')">üåô Karanlƒ±k Mod</div>
    <div style="padding:10px; cursor:pointer;" onclick="setTheme('light')">‚òÄÔ∏è Aydƒ±nlƒ±k Mod</div>
</div>

<div class="container">
    <div class="lang-container">
        <select class="lang-select" id="lang-select" onchange="init()">
            <option value="tr">üáπüá∑ T√ºrk√ße (TDK)</option>
            <option value="en">üá∫üá∏ English (Oxford)</option>
        </select>
    </div>
    
    <div class="stat-top">
        <span id="timer-ui">30</span>s | <span id="wpm-ui">0</span> WPM | <span id="score-ui">0</span> Pts
    </div>
    
    <div id="word-display"></div>
    <input type="text" id="typing-input" autofocus autocomplete="off">
</div>

<script>
const pools = {
    tr: ["bir", "ve", "bu", "da", "de", "i√ßin", "ne", "o", "kadar", "gibi", "daha", "var", "deƒüil", "ben", "√ßok", "yok", "ama", "sonra", "ki", "sadece", "en", "kendi", "b√ºy√ºk", "ba≈üka", "b√∂yle", "hi√ß", "yine", "yani", "t√ºm", "≈ü√∂yle", "doƒüru", "√ß√ºnk√º", "biraz", "aslƒ±nda", "ancak", "belki", "herkes", "insan", "g√ºn", "yer", "y√ºz", "yol", "i≈ü", "el", "g√∂z", "d√ºnya", "≈üey", "durum", "an", "gece", "kitap", "√ßocuk", "ya≈üam", "bilgi", "kelime"],
    en: ["the", "be", "to", "of", "and", "a", "in", "that", "have", "i", "it", "for", "not", "on", "with", "he", "as", "you", "do", "at", "this", "but", "his", "by", "from", "they", "we", "say", "her", "she", "or", "an", "will", "my", "one", "all", "would", "there", "their", "what", "so", "up", "out", "if", "about", "who", "get", "which", "go", "me", "when", "make", "can", "like", "time", "no", "just", "him", "know", "take", "people", "into", "year", "your", "good", "some", "could", "them", "see", "other", "than", "then", "now", "look", "only", "come", "its", "over", "think", "also", "back", "after", "use", "two", "how", "our", "work", "first", "well", "way", "even", "new", "want", "because"]
};

let words = [], idx = 0, time = 30, score = 0, playing = false, interval, errors = [], correctCount = 0;

function login() {
    const name = document.getElementById('u-name').value || "Eyy√ºp";
    document.getElementById('av-name').innerText = name.toUpperCase();
    document.getElementById('av-icon').innerText = name[0].toUpperCase();
    document.getElementById('auth-screen').style.display = 'none';
    
    // Rekoru y√ºkle
    const pb = localStorage.getItem('eyyup_pb') || 0;
    document.getElementById('pb-val').innerText = pb;
    
    init();
}

function init() {
    words = []; idx = 0; score = 0; playing = false; correctCount = 0; time = 30;
    const lang = document.getElementById('lang-select').value;
    const pool = pools[lang];
    
    for(let i=0; i < 200; i++) words.push(pool[Math.floor(Math.random() * pool.length)]);
    
    document.getElementById('word-display').innerHTML = words.map((w,i) => `<span class="word" id="w-${i}">${w}</span>`).join('');
    document.getElementById('w-0').classList.add('active');
    document.getElementById('score-ui').innerText = "0";
    document.getElementById('timer-ui').innerText = "30";
    document.getElementById('wpm-ui').innerText = "0";
}

document.getElementById('typing-input').addEventListener('input', (e) => {
    if(!playing) {
        playing = true;
        interval = setInterval(() => {
            time--;
            document.getElementById('timer-ui').innerText = time;
            // WPM Hesaplama
            const wpm = Math.round((correctCount / ((30 - time) / 60)));
            document.getElementById('wpm-ui').innerText = isFinite(wpm) ? wpm : 0;
            
            if(time <= 0) finish();
        }, 1000);
    }
    
    const val = e.target.value.trim();
    const target = words[idx];
    const el = document.getElementById(`w-${idx}`);

    if(!target.startsWith(val)) el.classList.add('wrong');
    else el.classList.remove('wrong');

    if(e.target.value.endsWith(' ')) {
        if(val === target) {
            el.className = 'word correct';
            score += target.length * 10;
            correctCount++;
        } else {
            el.className = 'word wrong';
            errors.push({t: target, y: val});
        }
        idx++; e.target.value = "";
        document.getElementById(`w-${idx}`).classList.add('active');
        document.getElementById('score-ui').innerText = score;
        if(idx % 6 === 0) document.getElementById('word-display').scrollTop += 60;
    }
});

function finish() {
    clearInterval(interval);
    document.getElementById('result-overlay').style.display = 'flex';
    document.getElementById('res-score').innerText = score;
    document.getElementById('res-stats').innerText = `Doƒüru: ${correctCount} | Yanlƒ±≈ü: ${idx - correctCount}`;
    
    // Ki≈üisel Rekor Kontrol√º
    const currentPB = localStorage.getItem('eyyup_pb') || 0;
    if(score > currentPB) {
        localStorage.setItem('eyyup_pb', score);
        document.getElementById('pb-val').innerText = score;
        alert("YENƒ∞ REKOR!");
    }
}

function toggleSide() { document.getElementById('side-menu').classList.toggle('open'); }
function setTheme(t) { document.body.className = t === 'light' ? '' : 'dark-theme'; }
function focusInput() { document.getElementById('typing-input').focus(); }
</script>
</body>
</html>
